From 7f5e852f9aa8cfef9a592ac290d79f88a26aac5a Mon Sep 17 00:00:00 2001
From: Kirstin Cruickshank Taylor <harding.kirstin5@gmail.com>
Date: Thu, 26 Feb 2026 22:26:18 -0500
Subject: [PATCH] fixed nav bar to respond with scroll, add 5 workouts to
 reset, compass rotation

---
 MISSION_LOG.md               | 11 ++++++
 app/page.tsx                 | 16 ++++----
 components/DynamicHeader.tsx | 77 +++++++++++++++++++++++++-----------
 3 files changed, 73 insertions(+), 31 deletions(-)

diff --git a/MISSION_LOG.md b/MISSION_LOG.md
index be88953..ee2c5ab 100644
--- a/MISSION_LOG.md
+++ b/MISSION_LOG.md
@@ -19,3 +19,14 @@ This session focused on narrowing the project scope and solidifying the brand id
 
 ### Current State:
 The site is currently a high-impact, single-page landing experience ready for content expansion and backend integration for user enrollment. All visual assets are stylized, and the navigation is functionally tied to the content layout.
+
+## Session Summary (Late Feb 2026)
+This session focused on UI polish, mobile navigation, and refining the Dynamic Header's intersection observer behavior.
+
+### Major Objectives Completed:
+- **Mobile Navigation:** Added a full-screen blurred backdrop to the mobile menu (`DynamicHeader`) that closes the menu when clicked outside.
+- **Dynamic Compass:** Updated the Compass logo in the navbar to dynamically rotate and scale smoothly based on the vertical scroll percentage of the page.
+- **Navigation Links:** 
+  - Added "Reset" (changed from "Off-Grid Reset") to the desktop and mobile navigation menus.
+  - Linked the text "Our Mission" in the dynamic header to trigger when the user scrolls to the footer, without adding it as a clickable sticky nav link.
+- **Intersection Observer:** Fixed threshold/margin bugs that were preventing the bottom-most sections ("Join The Signal" and "Our Mission") from correctly triggering the title change in the dynamic header on smaller screens.
diff --git a/app/page.tsx b/app/page.tsx
index 1dad587..58913fa 100644
--- a/app/page.tsx
+++ b/app/page.tsx
@@ -7,11 +7,11 @@ import { OffGridResetIcon } from '@/components/OffGridResetIcon';
 
 // ... (Keep existing waypoint data arrays the same as before)
 const triageMovements = [
-    { state: "Tangled (Overwhelmed)", action: "The Breach", instruction: "exercise example" },
-    { state: "Buried (Anxious)", action: "The Thicket", instruction: "exercise example" },
-    { state: "Stagnant (Sedentary)", action: "The Deadfall", instruction: "exercise example" },
-    { state: "Clouded (Scattered)", action: "The Horizon", instruction: "exercise example" },
-    { state: "Heavy (Reactive)", action: "The Anchor", instruction: "exercise example" }
+    { state: "Tangled (Overwhelmed) — Too many directions, nowhere to start, feeling \"trapped in the overgrowth.\"", action: "The Perimeter Stake", instruction: "Find a wall or a heavy piece of furniture. Place both palms flat against it at shoulder height. Lean in and push with 100% of your strength for 10 seconds, then immediately release and let your arms hang. Repeat 3 times." },
+    { state: "Buried (Anxious) — A heavy chest, shallow breathing, feeling like you're under the weight of \"deadfall.\"", action: "The Brush-Off", instruction: "Stand up and use your hands to vigorously \"sweep\" your body. Start at your shoulders and sweep down your arms to your fingertips. Sweep down your chest, your back, and down your legs to your feet. Imagine you are literally brushing off dirt or debris from a day in the field." },
+    { state: "Stagnant (Sedentary) — Physical \"frozen\" feeling, low energy, the \"stiff joints\" of a 9-to-5 map.", action: "The Pulse-Starter", instruction: "Stand with feet hip-width apart. Perform 10 small, rapid vertical hops. You don't need to go high; just get your heels off the ground. While jumping, let your jaw and shoulders go completely loose (the \"ragdoll\" effect)." },
+    { state: "Clouded (Scattered) — \"Needle in a haystack\" focus is missing; thoughts are drifting like mist.", action: "The Horizon Pivot", instruction: "Stand still and pick one specific, tiny object in the distance (the \"Waypoint\"). Keep your eyes locked on it. Now, slowly rotate your entire body 360 degrees while keeping your head turned and your eyes fixed on that one point as long as possible. Once you lose sight of it, whip your head around to find it again immediately." },
+    { state: "The Universal Clearing — For when you don't know which state you're in, but you know you're stuck.", action: "The Hatchet Swing", instruction: "Stand with a wide base. Interlace your fingers as if holding a hatchet handle. Reach high over your head, stretching your spine. On a forceful exhale (a \"Ha!\" sound), swing your \"hatchet\" down between your legs, hinging at the hips." }
 ];
 
 export default function Home() {
@@ -167,7 +167,7 @@ export default function Home() {
                                         disabled={isDeploying}
                                         className="bg-action text-white px-12 py-5 font-serif text-2xl uppercase tracking-widest hover:bg-action-hover transition-all flex items-center justify-center gap-3 mx-auto shadow-xl hover:shadow-action/20"
                                     >
-                                        {isDeploying ? 'Deploying...' : 'Deploy Triage Kit'} <Signal className={isDeploying ? 'animate-pulse' : ''} />
+                                        {isDeploying ? 'Deploying...' : 'Calibrate Tools'} <OffGridResetIcon className={`w-6 h-6 ${isDeploying ? 'animate-pulse' : ''}`} />
                                     </button>
                                 </div>
                             ) : (
@@ -277,7 +277,7 @@ export default function Home() {
                         </div>
                         <div className="lg:w-1/2 relative">
                             <div className="border-8 border-yellow shadow-2xl overflow-hidden rotate-1">
-                                <img src="/kinetic-clearing.jpg" className="w-full h-full object-cover filter grayscale-[0.5] contrast-125 saturate-[0.7] brightness-90" alt="Kinetic Clearing" />
+                                <img src="/kinetic-clearing.jpg" className="w-full h-full object-cover filter grayscale-[0.5] contrast-125 saturate-[0.7] brightness-90" alt="Sleeping Giant Provincial Park" />
                             </div>
                             <div className="absolute top-8 left-8 bg-black text-yellow px-6 py-2 font-vision font-black uppercase tracking-tight text-sm z-20">Now Entering: The Clearing</div>
                         </div>
@@ -332,7 +332,7 @@ export default function Home() {
             </section>
 
             {/* Footer / Mission Statement */}
-            <footer className="bg-spruce text-granite p-12 text-center border-t-8 border-yellow">
+            <footer id="mission" className="bg-spruce text-granite p-12 text-center border-t-8 border-yellow">
                 <div className="max-w-4xl mx-auto mb-12">
                     <Crosshair className="w-12 h-12 text-action mx-auto mb-6" />
                     <h3 className="font-serif text-3xl font-bold uppercase mb-4 tracking-tight">The Mission</h3>
diff --git a/components/DynamicHeader.tsx b/components/DynamicHeader.tsx
index 0b9f976..c09eb57 100644
--- a/components/DynamicHeader.tsx
+++ b/components/DynamicHeader.tsx
@@ -7,9 +7,11 @@ import { Compass, Menu, Leaf } from 'lucide-react';
 const sectionMap: Record<string, string> = {
   'home': 'Kinetic Clearing',
   'story': "The Founder's Story",
+  'repair': 'Off-Grid Reset',
   'hatchet': 'The Field Hatchet',
   'clearing': 'Kinetic Clearing',
-  'enrollment': 'Join The Signal'
+  'enrollment': 'Join The Signal',
+  'mission': 'Our Mission'
 };
 
 // Randomized leaf decoration along the header bottom edge
@@ -49,11 +51,17 @@ const LeafDecoration = () => {
 export default function DynamicHeader() {
   const [activeTitle, setActiveTitle] = useState('Kinetic Clearing');
   const [isScrolled, setIsScrolled] = useState(false);
+  const [scrollProgress, setScrollProgress] = useState(0);
   const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
 
   useEffect(() => {
     const handleScroll = () => {
       setIsScrolled(window.scrollY > 50);
+
+      // Calculate scroll progress percentage (0 to 1)
+      const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
+      const progress = scrollHeight > 0 ? Math.min(Math.max(window.scrollY / scrollHeight, 0), 1) : 0;
+      setScrollProgress(progress);
     };
 
     // Intersection Observer to track which section is currently viewed
@@ -66,21 +74,24 @@ export default function DynamicHeader() {
       });
     };
 
-    // Observer options: Trigger when 40% of the section is visible in viewport
+    // Observer options: Trigger when the section reaches a fair margin near the top
     const observerOptions = {
       root: null,
-      rootMargin: '-10% 0px -50% 0px', // Adjusts the "trigger zone" toward the top middle
+      rootMargin: '-10% 0px -40% 0px', // Adjusted to catch the bottom-most section easier
       threshold: 0,
     };
 
     const observer = new IntersectionObserver(observerCallback, observerOptions);
 
     // Target the IDs defined in page.tsx
-    const targets = document.querySelectorAll('#home, #story, #hatchet, #clearing');
+    const targets = document.querySelectorAll('#home, #story, #repair, #hatchet, #clearing, #enrollment, #mission');
     targets.forEach((t) => observer.observe(t));
 
     window.addEventListener('scroll', handleScroll);
 
+    // Initial call to set initial progress
+    handleScroll();
+
     return () => {
       window.removeEventListener('scroll', handleScroll);
       targets.forEach((t) => observer.unobserve(t));
@@ -111,8 +122,17 @@ export default function DynamicHeader() {
 
         {/* Dynamic Logo/Title Section */}
         <div className="flex items-center gap-3">
-          {/* The compass rotates slightly when scrolled to indicate kinetic energy */}
-          <Compass className={`text-yellow transition-all duration-500 ${isScrolled ? 'h-6 w-6 rotate-45' : 'h-8 w-8'}`} strokeWidth={2.5} />
+          {/* The compass rotates dynamically based on scroll progress (up to 360deg) */}
+          <Compass
+            className="text-yellow"
+            strokeWidth={2.5}
+            style={{
+              transform: `rotate(${scrollProgress * 360}deg)`,
+              width: `${Math.max(24, 32 - (scrollProgress * 8))}px`,
+              height: `${Math.max(24, 32 - (scrollProgress * 8))}px`,
+              transition: 'width 0.5s, height 0.5s', // Smooth scaling
+            }}
+          />
 
           {/* The Changing Text */}
           <span key={activeTitle} className={`font-serif font-black uppercase tracking-widest text-granite animate-in slide-in-from-bottom-2 fade-in duration-300 ${isScrolled ? 'text-xl' : 'text-2xl'}`}>
@@ -124,6 +144,7 @@ export default function DynamicHeader() {
         <nav className="hidden md:flex space-x-8 font-vision font-black text-xs text-white uppercase tracking-[0.2em]">
           <a href="#home" className="hover:text-yellow transition-colors border-b-2 border-transparent hover:border-yellow pb-1">Home</a>
           <a href="#story" className="hover:text-yellow transition-colors border-b-2 border-transparent hover:border-yellow pb-1">Story</a>
+          <a href="#repair" className="hover:text-yellow transition-colors border-b-2 border-transparent hover:border-yellow pb-1">Reset</a>
           <a href="#hatchet" className="hover:text-yellow transition-colors border-b-2 border-transparent hover:border-yellow pb-1">Hatchet</a>
           <a href="#clearing" className="hover:text-yellow transition-colors border-b-2 border-transparent hover:border-yellow pb-1">Clearing</a>
           <a href="#enrollment" className="hover:text-action hover:border-action transition-all border-b-2 border-transparent hover:drop-shadow-[0_0_8px_rgba(255,85,0,0.7)] pb-1">Alert</a>
@@ -138,23 +159,33 @@ export default function DynamicHeader() {
 
       {/* Basic Mobile Menu Drawer (Safety Vest Style) */}
       {mobileMenuOpen && (
-        <div className="md:hidden absolute top-full left-0 w-full bg-action border-b-8 border-yellow p-8 flex flex-col gap-6 text-white font-black uppercase tracking-[0.2em] text-lg shadow-2xl animate-in slide-in-from-top duration-300">
-          <a href="#home" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
-            <div className="w-2 h-2 bg-yellow"></div> Home
-          </a>
-          <a href="#story" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
-            <div className="w-2 h-2 bg-yellow"></div> Story
-          </a>
-          <a href="#hatchet" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
-            <div className="w-2 h-2 bg-yellow"></div> The Field Hatchet
-          </a>
-          <a href="#clearing" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
-            <div className="w-2 h-2 bg-yellow"></div> Kinetic Clearing
-          </a>
-          <a href="#enrollment" className="hover:text-action flex items-center gap-4 transition-all" onClick={() => setMobileMenuOpen(false)}>
-            <div className="w-2 h-2 bg-action"></div> Alert the Signal
-          </a>
-        </div>
+        <>
+          {/* Backdrop for closing menu on click outside */}
+          <div
+            className="md:hidden absolute top-full left-0 w-full h-screen bg-black/50 backdrop-blur-sm animate-in fade-in duration-300"
+            onClick={() => setMobileMenuOpen(false)}
+          />
+          <div className="md:hidden absolute top-full left-0 w-full bg-action border-b-8 border-yellow p-8 flex flex-col gap-6 text-white font-black uppercase tracking-[0.2em] text-lg shadow-2xl animate-in slide-in-from-top duration-300">
+            <a href="#home" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
+              <div className="w-2 h-2 bg-yellow"></div> Home
+            </a>
+            <a href="#story" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
+              <div className="w-2 h-2 bg-yellow"></div> Story
+            </a>
+            <a href="#repair" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
+              <div className="w-2 h-2 bg-yellow"></div> Reset
+            </a>
+            <a href="#hatchet" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
+              <div className="w-2 h-2 bg-yellow"></div> The Field Hatchet
+            </a>
+            <a href="#clearing" className="hover:text-yellow flex items-center gap-4" onClick={() => setMobileMenuOpen(false)}>
+              <div className="w-2 h-2 bg-yellow"></div> Kinetic Clearing
+            </a>
+            <a href="#enrollment" className="hover:text-action flex items-center gap-4 transition-all" onClick={() => setMobileMenuOpen(false)}>
+              <div className="w-2 h-2 bg-action"></div> Alert the Signal
+            </a>
+          </div>
+        </>
       )}
     </header>
   );
-- 
2.53.0.windows.1

